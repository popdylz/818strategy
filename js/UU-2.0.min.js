var UU = UU || {};
var actEndTime = new Date("2017/04/16").getTime();
(UU.init = function() {
	$(window).scroll(function() {
		var b = $(document).scrollTop();
		var f = $(window).height();
		var a = $("#bottomFloat").height();
		var d = $("#backTopFloat").height();
		var e = f + b - a;
		var c = f + b - d - 20;
		if(!$.support.leadingWhitespace) {
			$("#bottomFloat").stop().animate({
				"top": e
			}, "fast");
			$("#backTopFloat").stop().animate({
				"top": c
			}, "fast")
		}
		if(b > 300) {
			$("#leftFloat").show();
			$("#rightFloat").show();
			$("#backTopFloat").show()
		} else {
			$("#leftFloat").hide();
			$("#rightFloat").hide();
			$("#backTopFloat").hide()
		}
	});
	$("[data-slow]").click(function(d) {
		var a = $(this).attr("href").substring(1);
		var c = $("#" + a);
		var b = c.offset().top;
		$("window,body,html").animate({
			scrollTop: b
		}, 300);
		d.preventDefault()
	});
	$(document).ready(function() {
		UU.lazyload("img[src2]");
		UU.initProData(".js-product", products)
	})
})();
UU.tab = function(e, c) {
	var f = {
		paneCount: 2,
		uevent: "hover"
	};
	var d = $.extend({}, f, c);
	var b = d.paneCount;
	var a = d.uevent;
	$(e).each(function() {
		var i = $(this);
		var h = i.find(".tab-btn");
		var j = i.find(".tab-pane-box");
		var g = i.find(".tab-pane");
		h.live(a, function() {
			var l = $(this);
			var k = l.index();
			l.addClass("on").siblings().removeClass("on");
			g.eq(k).addClass("on").siblings().removeClass("on")
		})
	})
};
UU.slideFocus = function(a, n) {
	var g = {
		pageWidth: 1000,
		pageHeight: 500,
		pageCount: 3,
		interval: 3000,
		delay: 5000,
		speed: 500,
		auto: true,
		easing: "linear",
		pageNumWidth: 12
	};
	var b = $.extend({}, g, n);
	var l = b.pageWidth;
	var h = b.pageHeight;
	var f = b.pageCount;
	var d = b.interval;
	var i = b.delay;
	var e = b.speed;
	var m = b.auto;
	var k = b.easing;
	var j = b.pageNumWidth;
	var c = null;
	$(a).each(function() {
		var t = $(this);
		var p = t.find(".btn");
		var o = t.find(".prev");
		var w = t.find(".next");
		var v = t.find(".nums");
		var s = v.find(".num");
		var y = t.find(".box");
		var x = t.find(".content");
		var u = t.find(".page");
		var z = function() {
			var A = (j + 4) * f;
			v.css({
				"width": A,
				"marginLeft": -A / 2
			});
			y.css({
				"width": l,
				"height": h,
				"overflow": "hidden"
			});
			x.css({
				"width": l * f * 2,
				"left": -l * f
			});
			u.css({
				"width": l,
				"height": h
			});
			x.append(x.html())
		}();
		var q = function() {
			x.stop().animate({
				left: [-l * (f + 1), k]
			}, e, function() {
				var A = x.find(".page");
				x.append(A.eq(0).clone());
				A.eq(0).remove();
				x.css({
					left: -l * f
				});
				r()
			})
		};
		var r = function() {
			var A = t.find(".page").eq(f).attr("data-page");
			t.find(".num").eq(A - 1).addClass("on").siblings().removeClass("on")
		};
		if(m) {
			c = setInterval(q, d);
			t.hover(function() {
				clearInterval(c)
			}, function() {
				c = setTimeout(function() {
					c = setInterval(q, d)
				}, i)
			})
		}
		w.click(function() {
			x.stop().animate({
				left: [-l * (f + 1), k]
			}, e, function() {
				var A = x.find(".page");
				x.append(A.eq(0).clone());
				A.eq(0).remove();
				x.css({
					left: -l * f
				});
				r()
			})
		});
		o.click(function() {
			x.stop().animate({
				left: [-l * (f - 1), k]
			}, e, function() {
				var A = x.find(".page");
				var B = f * 2 - 1;
				x.prepend(A.eq(B).clone());
				A.eq(B).remove();
				x.css({
					left: -l * f
				});
				r()
			})
		});
		s.click(function() {
			var D = $(this);
			var B = D.index() + 1;
			var A = t.find(".page").eq(f).attr("data-page");
			var C = -l * f - (B - A) * l;
			D.addClass("on").siblings().removeClass("on");
			x.stop().animate({
				left: [C, k]
			}, e)
		})
	})
};
UU.slideProduct = function(a, o) {
	var h = {
		pageWidth: 1000,
		pageHeight: 500,
		pageCount: 3,
		interval: 3000,
		delay: 5000,
		speed: 500,
		auto: true,
		easing: "linear",
		pageNumWidth: 12
	};
	var b = $.extend({}, h, o);
	var m = b.pageWidth;
	var i = b.pageHeight;
	var f = b.pageCount;
	var d = b.interval;
	var j = b.delay;
	var e = b.speed;
	var n = b.auto;
	var l = b.easing;
	var k = b.pageNumWidth;
	var c = null,
		g = 0;
	$(a).each(function() {
		var u = $(this);
		var q = u.find(".btn");
		var p = u.find(".prev");
		var x = u.find(".next");
		var w = u.find(".nums");
		var t = w.find(".num");
		var z = u.find(".box");
		var y = u.find(".content");
		var v = u.find(".page");
		var A = function() {
			var B = (k + 4) * f;
			w.css({
				"width": B,
				"marginLeft": -B / 2
			});
			z.css({
				"width": m,
				"height": i,
				"overflow": "hidden"
			});
			y.css({
				"width": m * f
			});
			v.css({
				"width": m,
				"height": i
			})
		}();
		var r = function(B) {
			if(B === "prev") {
				g = g === 0 ? f - 1 : g - 1
			} else {
				g = g === f - 1 ? 0 : g + 1
			}
			y.stop().animate({
				left: [-m * g, l]
			}, e, function() {
				s(g)
			})
		};
		var s = function(B) {
			u.find(".nums").find("li").eq(B).addClass("on").siblings().removeClass("on")
		};
		if(n) {
			c = setInterval(r, d);
			u.hover(function() {
				clearInterval(c)
			}, function() {
				c = setTimeout(function() {
					c = setInterval(r, d)
				}, j)
			})
		}
		p.click(function() {
			r("prev")
		});
		x.click(function() {
			r("next")
		});
		t.click(function() {
			var C = $(this);
			var B = -m * C.index();
			C.addClass("on").siblings().removeClass("on");
			y.stop().animate({
				left: [B, l]
			}, e)
		})
	})
};
UU.roll = function(b, n) {
	var i = {
		itemWidth: 150,
		itemHeight: 40,
		itemCount: 10,
		speed: 20,
		step: 1,
		auto: true,
		easing: "linear",
		direction: "right-to-left"
	};
	var c = $.extend({}, i, n);
	var j = c.itemWidth;
	var g = c.itemHeight;
	var a = c.itemCount;
	var f = c.speed;
	var e = c.step;
	var m = c.auto;
	var k = c.direction;
	var l = 0,
		h = 0,
		d = null;
	$(b).each(function() {
		var p = $(this);
		var v = p.find(".roll-box");
		var s = p.find(".roll-content");
		var t = p.find(".roll-list");
		var u = t.find("li");
		var o = p.find(".prev");
		var q = p.find(".next");
		var w = function() {
			v.css({
				"overflow": "hidden"
			});
			u.css({
				"width": j,
				"height": g,
				"overflow": "hidden"
			});
			if(k === "right-to-left" || k === "left-to-right") {
				l = j * a;
				h = g;
				t.css({
					"width": l,
					"height": h
				});
				s.append(s.html()).css({
					"width": l * 2,
					"height": h,
					"left": -l
				})
			} else {
				l = j;
				h = g * a;
				t.css({
					"width": l,
					"height": h
				});
				s.append(s.html()).css({
					"width": l,
					"height": h * 2,
					"top": -h
				})
			}
		}();
		var r = function(x) {
			if(x === "left-to-right") {
				clearInterval(d);
				d = setInterval(function() {
					var y = parseInt(s.css("left"));
					if(y >= 0) {
						s.css("left", -l)
					} else {
						s.css("left", y + e)
					}
				}, f)
			} else {
				if(x === "right-to-left") {
					clearInterval(d);
					d = setInterval(function() {
						var y = parseInt(s.css("left"));
						if(y <= -l) {
							s.css("left", 0)
						} else {
							s.css("left", y - e)
						}
					}, f)
				} else {
					if(x === "top-to-bottom") {
						clearInterval(d);
						d = setInterval(function() {
							var y = parseInt(s.css("top"));
							if(y >= 0) {
								s.css("top", -h)
							} else {
								s.css("top", y + e)
							}
						}, f)
					} else {
						clearInterval(d);
						d = setInterval(function() {
							var y = parseInt(s.css("top"));
							if(y <= -h) {
								s.css("top", 0)
							} else {
								s.css("top", y - e)
							}
						}, f)
					}
				}
			}
		};
		p.hover(function() {
			clearInterval(d)
		}, function() {
			r(k)
		});
		if(m) {
			d = setInterval(function() {
				r(k)
			}, f)
		}
	})
};
UU.dialog = function(a, l) {
	var c = {
		dialogWidth: 500,
		dialogHeight: 400,
		uevent: "click"
	};
	var b = $.extend({}, c, l);
	var d = b.dialogWidth;
	var g = b.dialogHeight;
	var k = b.uevent;
	var j = $("#UU_mask"),
		i = $("#UU_close"),
		e = $("#UU_dialogCoat"),
		f = $("#UU_dialogContent");
	var h = function() {
		var m = '<div id="UU_mask" style="width:100%;height:100%;position:fixed;z-index:999;left:0;top:0;background-color:#000;opacity:0.5;display:none;"></div>' + '<div id="UU_dialogCoat" style="display:none;">' + '<a href="javascript:void(0)" id="UU_close" style="width:100px;height:100px;position:absolute;right:0;top:0;z-index:2;"></a>' + '<div id="UU_dialogContent" style="width:100%;height:100%;position:relative;"></div>' + "</div>";
		if($("#UU_mask").length <= 0) {
			$("body").append(m);
			j = $("#UU_mask"), i = $("#UU_close"), e = $("#UU_dialogCoat"), f = $("#UU_dialogContent")
		}
	}();
	$(a).live(k, function() {
		var m = $(this);
		e.css({
			"width": d,
			"height": g,
			"position": "fixed",
			"z-index": "1000",
			"left": "50%",
			"margin-left": -d / 2,
			"top": "50%",
			"margin-top": -g / 2
		});
		f.html('<img src="' + m.attr("data-src") + '">');
		j.fadeIn();
		e.fadeIn()
	});
	i.live("click", function() {
		e.fadeOut();
		j.fadeOut()
	})
};
UU.timedown = function(f, c) {
	var h = {
		fromStart: "day",
		endDate: "2018/06/15 00:00:00"
	};
	var e = $.extend({}, h, c);
	var a = e.fromStart;
	var g = e.endDate;
	var d = function(i) {
		return i.toString().replace(/^(\d)$/, "0$1")
	};
	var b = function(k) {
		var i = /^(\d{1,4})(\/|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;
		var j = k.match(i);
		if(j == null) {
			alert("日期格式不正确,请重新输入");
			return false
		} else {
			return true
		}
	};
	$(f).each(function() {
		var j = $(this);
		if(!b(g)) {
			return false
		}
		var i = new Date(g).getTime();
		var l = new Date().getTime();
		var n = null;
		if(i > l) {
			var k = (i - l) / 1000;
			n = setInterval(m, 1000)
		} else {
			switch(a) {
				case "hour":
					j.html('<span class="hour">00</span><span class="minute">00</span><span class="second">00</span>');
					break;
				case "minute":
					j.html('<span class="minute">00</span><span class="second">00</span>');
					break;
				default:
					j.html('<span class="day">00</span><span class="hour">00</span><span class="minute">00</span><span class="second">00</span>')
			}
		}

		function m() {
			if(k > 0) {
				var o = Math.floor(k / 86400);
				var r = Math.floor((k - 86400 * o) / 3600);
				var p = Math.floor((k - o * 86400 - r * 3600) / 60);
				var q = Math.floor(k % 60);
				switch(a) {
					case "hour":
						j.html('<span class="hour">' + d(r + o * 24) + "</span><span>" + d(p) + "</span><span>" + d(q) + "</span>");
						break;
					case "minute":
						j.html('<span class="minute">' + d(p + r * 60 + o * 24 * 60) + "</span><span>" + d(q) + "</span>");
						break;
					default:
						j.html('<span class="day">' + d(o) + '</span><span class="hour">' + d(r) + '</span><span class="minute">' + d(p) + '</span><span class="second">' + d(q) + "</span>")
				}
				k--
			} else {
				clearInterval(n)
			}
		}
	})
};
UU.addMedia = function(h, l) {
	var e = {
		mediaType: "flash",
		mediaContent: "",
		width: 500,
		height: 400,
		uid: "",
		listid: ""
	};
	var a = $.extend({}, e, l);
	var k = a.mediaType;
	var f = a.mediaContent;
	var b = a.width;
	var j = a.height;
	var i = a.uid;
	var d = a.listid;
	switch(k) {
		case "flash":
			var g = '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="' + b + '" height="' + j + '">' + '<param name="allowScriptAccess" value="always" />' + '<param name="allowFullScreen" value="false" />' + '<param name="movie" value="' + f + '" />' + '<param name="quality" value="high" />' + '<param name="wmode" value="transparent" />' + '<param name="flashvars" value="ap=0" />' + '<embed src="' + f + '" quality="high" wmode="transparent" width="' + b + '" height="' + j + '" name="focusshow" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer_cn" flashvars="ap=0"></embed>' + "</object>";
			$(h).html(g);
			break;
		case "weibo":
			var c = '<wb:livestream skin="silver" topic="' + f + '" width="' + b + '" height="' + j + '" uid="' + i + '" listid="' + d + '" ></wb:livestream>';
			$("html").attr("xmlns:wb", "http://open.weibo.com/wb");
			$("head").append('<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=" type="text/javascript" charset="utf-8"><\/script>');
			$(h).html(c);
			break;
		default:
			$(h).html(f)
	}
};
UU.lazyload = function(a, n) {
	var d = {
		threshold: 0,
		uevent: "scroll",
		dataAttribute: "src2",
		placeholder: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",
		callback: null,
		data: []
	};
	var b = $.extend({}, d, n);
	var c = $(window);
	var i = $(a);
	var h = b.threshold;
	var l = b.dataAttribute;
	var m = b.uevent;
	var j = b.placeholder;
	var g = b.data;
	var k = b.callback;
	var f = function(u) {
		var r = $(u);
		var t = c.scrollLeft();
		var o = c.scrollTop();
		var q = c.width();
		var p = c.height();
		var v = r.offset().left;
		var s = r.offset().top;
		return((v - h) < (q + t)) && ((s - h) < (p + o))
	};

	function e() {
		i.each(function() {
			if(f(this)) {
				$(this).trigger("appear")
			}
		})
	}
	i.each(function(p, q) {
		var o = this;
		var r = $(o);
		o.loaded = false;
		if(!k) {
			if(r.is("img")) {
				r.attr("src", j)
			} else {
				r.css("background-image", "url('" + j + "')")
			}
		}
		r.one("appear", function() {
			if(!this.loaded) {
				if(!k) {
					var s = r.attr(l);
					if(r.is("img")) {
						r.attr("src", s)
					} else {
						r.css("background-image", "url('" + s + "')")
					}
				} else {
					if(undefined == g[p]) {
						return false
					} else {
						k(r, g[p])
					}
				}
				o.loaded = true;
				a = $.grep(a, function(t) {
					return !t.loaded
				})
			}
		})
	});
	c.bind(m + " resize", function() {
		e()
	});
	$(document).ready(function() {
		e()
	})
};
var bindData = function(b, i) {
	var f = function(j) {
		var k;
		return(k = document.cookie.match(RegExp("(^| )" + j + "=([^;]*)(;|$)"))) ? decodeURIComponent(k[2].replace(/\+/g, "%20")) : null
	};
	var d = f("SN_CITY") && f("SN_CITY").split("_")[1] ? f("SN_CITY").split("_")[1] : "025";
	var g = $(b);
	var e = i.src,
		h = i.commodityCode,
		c = i.shopCode;
	g.find(".js-proSrc").attr("src", e);
	if(!!h) {
		h = formateCommodityCode(h);
		c = formateShopCode(c);
		var a = function() {
			$.ajax({
				url: "http://icps.suning.com/icps-web/getVarnishAllPrice014/" + h + "_" + d + "__" + c + "_1_priceServiceCallBack.vhtm",
				dataType: "jsonp",
				cache: true
			})
		}();
		window.priceServiceCallBack = function(n) {
			var o = n[0];
			var l = $("[data-id=" + o.cmmdtyCode + o.bizCode + "]");
			var m = o.price ? o.price : "暂无报价";
			var j = o.refPrice ? o.refPrice : (o.snPrice ? o.snPrice : o.price);
			if(Number(j) < Number(m)) {
				j = ""
			}
			var k = o.bookPrice;
			l.find(".js-promotionPrice").html(m);
			l.find(".js-referencePrice").html(j);
			l.find(".js-downPayment").html(k)
		}
	}
};
UU.initProData = function(p, k) {
	var c = function(i) {
		var z = typeof(i) == "object" && Object.prototype.toString.call(i).toLowerCase() == "[object array]" && i.length;
		return z
	};
	var g = $(p);
	var q = g.size();
	var b = k.length;
	if(!c(k)) {
		if(window.console) {
			console.log("products.js数据格式有问题！")
		}
		return
	}
	if(b < q) {
		var j = "配置的产品数据少于展示的产品数据" + "（配置数据：" + b + "条；展示数据：" + q + "条；）";
		if(window.console) {
			console.log(j)
		}
	}
	for(var t = 0; t < q; t++) {
		if(!!k[t]) {
			var d = k[t];
			var v = g.eq(t);
			var h = d.src,
				w = d.brandSrc,
				a = d.QRCodeSrc,
				o = d.name,
				e = d.proDiscount,
				n = d.promotionPrice,
				s = d.referencePrice,
				y = d.commodityCode,
				f = d.shopCode,
				m = d.couponNum,
				x = d.link,
				l = d.flagshipLink,
				r = d.couponLink,
				u = d.downPayment;
			v.find(".js-proSrc").attr("alt", o);
			v.find(".js-brandSrc").attr("src", w);
			v.find(".js-proName").html(o).attr("title", o);
			v.find(".js-proDiscount").html(e).attr("title", e);
			v.find(".js-couponNum").html(m);
			if(!y) {
				v.find(".js-promotionPrice").html(n);
				v.find(".js-referencePrice").html(s);
				v.find(".js-downPayment").html(u)
			} else {
				v.attr("data-id", formateCommodityCode(y) + formateShopCode(f))
			}
			if(!!v.attr("data-flag")) {
				v.prepend('<div class="' + v.attr("data-flag") + '"></div>')
			}
			if(!!a) {
				v.append('<div class="QR-code"><img src="' + a + '"></div>')
			} else {
				v.find(".js-proLink").attr("href", x);
				v.find(".js-couponLink").attr("href", r);
				v.find(".js-flagshipLink").attr("href", l)
			}
		}
	}
};
var formateCommodityCode = function(c) {
	var b = "";
	if(c.length < 18) {
		for(var a = 0; a < 18 - c.length; a++) {
			b += "0"
		}
	}
	return b + c
};
var formateShopCode = function(a) {
	var c = "";
	if(a.length < 10) {
		for(var b = 0; b < 10 - a.length; b++) {
			c += "0"
		}
	}
	return c + a
};